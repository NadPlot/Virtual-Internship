## Задача виртуальной стажировки:

разработать REST API для мобильного приложения ФСТР и релизовать методы:

1. POST submitData - отправка данных о перевале,
2. GET /<id> - получение данных о перевале по id,
3. GET /submitData/?email_user=<email> - получить данные об отправленных перевалах
по email пользователя,
4. PATCH /submitData/<id> - отредактировать данные о перевале, принимает JSON
в теле запроса (тот же что и при отправке нового перевала). Можно редактировать
все поля кроме данных пользователя (ФИО, email и пр.)

## Requirements
asyncpg~=0.22   
fastapi~=0.79   
sqlalchemy~=1.4 
psycopg2-binary~=2.9    
uvicorn~=0.18   
python-dotenv~=0.20     
pydantic[email] 
requests~=2.28  
pytest~=7.2 



## Выполнено:
1. Создана БД, БД улучшена в соответствии с рекомендациями (pereval.sql)
2. Для реализации задачи выбран FastAPI, создана структура проекта.
3. Выполнено подключение к БД.

4. Методы API:

1. Метод GET/pereval/{id} - получение информации о первевале по ID.
Если перевал есть в БД, будет выведена вся информация о перевале,
включая данные о пользователе, координатах, уровне.
Пример запроса: http://127.0.0.1:8000/pereval/12/

Пример вывода:

    {
      "id": 12,
      "add_time": "2021-07-01T09:01:05.602Z",
      "beauty_title": "пер.",
      "title": "Пхия",
      "other_titles": "Триев",
      "connect": "",
      "user": {
        "email": "user@email.ltd",
        "phone": 79031234567,
        "fam": "Пупкин",
        "name": "Василий",
        "otc": "Иванович"
      },
      "coords": {
        "latitude": "45.3842",
        "longitude": "7.1525",
        "height": "1200"
      },
      "level": {
        "winter": "",
        "summer": "1A",
        "autumn": "1A",
        "spring": ""
      },
      "status": "new"
    }

Если перевала нет в БД, будет сообщение: "Перевал не найден".

2. Метод POST/submitData/(принимает JSON в теле запроса) - отправка
данных по перевалу.

Пример JSON с информацией о перевале:

    {
      "beauty_title": "пер.",
      "title": "Пхия",
      "other_titles": "Триев",
      "connect": "", // что соединяет, текстовое поле
      "add_time": "2021-09-22 13:18:13",
      "user": {
        "email": "qwerty@mail.ru",
        "phone": "75555555",
        "fam": "Пупкин",
        "name": "Василий",
        "otc": "Иванович"
      },
      "coords": {
        "latitude": "45.3842",
        "longitude": "7.1525",
        "height": "1200"
      },
      "level": {
        "winter": "",
        "summer": "1A",
        "autumn": "1A",
        "spring": ""
      },
      "images": [{"data": "image1", "title": "Сeдловина"},
       {"data": "image2", "title": "Подъем"}]
    }
В случае успешной отправки будет сообщение "Отправлено успешно".

3. Метод GET/submitData/email/{email} - по почте пользователя выводит краткую
информацию о всех добавленых перевалах, включая статус.
Пример запроса: http://127.0.0.1:8000/submitData/email/user@email.ltd 

  Пример вывода:

    {
      "id": 12,
      "title": "Пхия",
      "other_titles": "Триев",
      "add_time": "2022-02-21T14:14:00",
      "status": "new"
    },
    {
      "id": 13,
      "title": "новый",
      "other_titles": "перевал",
      "add_time": "2021-09-21T12:12:12",
      "status": "new"
    }

4. Метод PATCH/submitData/{id} - отредактировать существующую запись
(замена), если она в статусе new.
Редактировать можно все поля, кроме тех, что содержат в себе ФИО,
адрес почты и номер телефона. Метод принимает тот же JSON,
что и при отправке данных нового перевала.

Пример JSON:

    {
      "beauty_title": "пер.",
      "title": "Пхия",
      "other_titles": "Триев",
      "connect": "", // что соединяет, текстовое поле
      "add_time": "2021-09-22 13:18:13",
      "user": {
        "email": "qwerty@mail.ru",
        "phone": "75555555",
        "fam": "Пупкин",
        "name": "Василий",
        "otc": "Иванович"
      },
      "coords": {
        "latitude": "45.3842",
        "longitude": "7.1525",
        "height": "1200"
      },
      "level": {
        "winter": "",
        "summer": "1A",
        "autumn": "1A",
        "spring": ""
      },
      "images": [{"data": "image1", "title": "Сeдловина"},
       {"data": "image2", "title": "Подъем"}]
    }

После внесения изменений в запись, будет сообщение об успешной отправке

    {
      "state": 1,
      "message": "Отправлено успешно"
    }
Если статус перевала не "new", будет выведено сообщение с актуальным статусом:

    {
      "state": 0,
      "message": "Невозможно внести изменения. Статус перевала: в работе"
    }

## Запуск
